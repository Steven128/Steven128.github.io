<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"steven128.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":false},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Webpack">
<meta property="og:type" content="article">
<meta property="og:title" content="webpack">
<meta property="og:url" content="https://steven128.github.io/2021/11/01/webpack/index.html">
<meta property="og:site_name" content="Steven128 的博客">
<meta property="og:description" content="Webpack">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://steven128.github.io/2021/11/01/webpack/webpack-1.png">
<meta property="og:image" content="https://steven128.github.io/2021/11/01/webpack/webpack-2.png">
<meta property="og:image" content="https://steven128.github.io/2021/11/01/.images/image-20210526112504058.png">
<meta property="og:image" content="https://steven128.github.io/2021/11/01/.images/image-20210526145412513.png">
<meta property="og:image" content="https://steven128.github.io/2021/11/01/.images/image-20210526232017808.png">
<meta property="article:published_time" content="2021-11-01T02:29:36.000Z">
<meta property="article:modified_time" content="2021-11-01T06:51:18.868Z">
<meta property="article:author" content="Steven128">
<meta property="article:tag" content="webpack">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://steven128.github.io/2021/11/01/webpack/webpack-1.png">

<link rel="canonical" href="https://steven128.github.io/2021/11/01/webpack/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>webpack | Steven128 的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Steven128 的博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">1</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">1</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">1</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://steven128.github.io/2021/11/01/webpack/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Steven128">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Steven128 的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          webpack
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-11-01 10:29:36 / 修改时间：14:51:18" itemprop="dateCreated datePublished" datetime="2021-11-01T10:29:36+08:00">2021-11-01</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/webpack/" itemprop="url" rel="index"><span itemprop="name">webpack</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Webpack"><a href="#Webpack" class="headerlink" title="Webpack"></a>Webpack</h1><p><img src="/2021/11/01/webpack/webpack-1.png" alt="Webpack"></p>
<span id="more"></span>

<h2 id="什么是-Webpack"><a href="#什么是-Webpack" class="headerlink" title="什么是 Webpack"></a>什么是 Webpack</h2><p>Webpack 是一个<strong>模块打包工具</strong> (module bundler)，在 Webpack 里一切文件皆模块。通过 loader 转换文件，通过 plugin 注入钩子，最后输出由多个模块组合的文件。Webpack 专注构建模块化项目。</p>
<blockquote>
<p>当 Webpack 处理应用程序时，它会递归地构建一个依赖关系图 (dependency graph)，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 bundle。</p>
<p>Webpack 就像一条生产线，要经过一系列处理流程后才能将源文件转换成输出结果。 这条生产线上的每个处理流程的职责都是单一的，多个流程之间有存在依赖关系，只有完成当前处理后才能交给下一个流程去处理。插件就像是一个插入到生产线中的一个功能，在特定的时机对生产线上的资源做处理。</p>
<p>Webpack 通过 Tapable 来组织这条复杂的生产线。 Webpack 在运行过程中会广播事件，插件只需要监听它所关心的事件，就能加入到这条生产线中，去改变生产线的运作。 Webpack 的事件流机制保证了插件的有序性，使得整个系统扩展性很好。 – 深入浅出 Webpack 吴浩麟</p>
</blockquote>
<p><img src="/2021/11/01/webpack/webpack-2.png" alt="Webpack"></p>
<h2 id="Webpack-核心概念"><a href="#Webpack-核心概念" class="headerlink" title="Webpack 核心概念"></a>Webpack 核心概念</h2><h3 id="1-Entry"><a href="#1-Entry" class="headerlink" title="1. Entry"></a>1. Entry</h3><p>入口起点 (entry point) 指示 Webpack 应该使用哪个模块，来作为构建其内部依赖图的开始。</p>
<p>进入入口起点后，Webpack 会找出有哪些模块和库是入口起点（直接和间接）依赖的。</p>
<p>每个依赖项随即被处理，最后输出到称之为 bundles 的文件中。</p>
<h3 id="2-Output"><a href="#2-Output" class="headerlink" title="2. Output"></a>2. Output</h3><p>Output 属性告诉 Webpack 在哪里输出它所创建的 bundles，以及如何命名这些文件，默认值为 <code>./dist</code>。</p>
<p>基本上，整个应用程序结构，都会被编译到你指定的输出路径的文件夹中。</p>
<h3 id="3-Module"><a href="#3-Module" class="headerlink" title="3. Module"></a>3. Module</h3><p>模块，在 Webpack 里一切皆模块，一个模块对应着一个文件。Webpack 会从配置的 Entry 开始递归找出所有依赖的模块。</p>
<h3 id="4-Chunk"><a href="#4-Chunk" class="headerlink" title="4. Chunk"></a>4. Chunk</h3><p>代码块，一个 Chunk 由多个模块组合而成，用于代码合并与分割。</p>
<h3 id="5-Loader"><a href="#5-Loader" class="headerlink" title="5. Loader"></a>5. Loader</h3><p>Loader 让 Webpack 能够去处理那些非 JavaScript 文件（Webpack 自身只理解 JavaScript）。</p>
<p>Loader 可以将所有类型的文件转换为 Webpack 能够处理的有效模块，然后你就可以利用 Webpack 的打包能力，对它们进行处理。</p>
<p>本质上，Webpack Loader 将所有类型的文件，转换为应用程序的依赖图（和最终的 bundle）可以直接引用的模块。</p>
<h3 id="6-Plugin"><a href="#6-Plugin" class="headerlink" title="6. Plugin"></a>6. Plugin</h3><p>Loader 被用于转换某些类型的模块，而插件则可以用于执行范围更广的任务。</p>
<p>插件的范围包括，从打包优化和压缩，一直到重新定义环境中的变量。插件接口功能极其强大，可以用来处理各种各样的任务。</p>
<h2 id="Webpack-构建流程"><a href="#Webpack-构建流程" class="headerlink" title="Webpack 构建流程"></a>Webpack 构建流程</h2><p>Webpack 的运行流程是一个串行的过程，从启动到结束会依次执行以下流程：</p>
<ol>
<li><strong>初始化参数</strong>：从配置文件和 Shell 语句中读取与合并参数，得出最终的参数。</li>
<li><strong>开始编译</strong>：用上一步得到的参数初始化 Compiler 对象，加载所有配置的插件，执行对象的 run 方法开始执行编译。</li>
<li><strong>确定入口</strong>：根据配置中的 entry 找出所有的入口文件。</li>
<li><strong>编译模块</strong>：从入口文件出发，调用所有配置的 Loader 对模块进行翻译，再找出该模块依赖的模块，再递归本步骤直到所有入口依赖的文件都经过了本步骤的处理。<blockquote>
<p>可以分为三个部分帮助记忆：</p>
<ul>
<li>调用各 loader 处理模块之间的依赖</li>
<li>调用 acorn 解析经 loader 处理后的源文件生成抽象语法树 AST</li>
<li>遍历 AST，构建该模块所依赖的模块</li>
</ul>
</blockquote>
</li>
<li><strong>完成模块编译</strong>：在经过第 4 步使用 Loader 翻译完所有模块后，得到了每个模块被翻译后的最终内容以及它们之间的依赖关系。</li>
<li><strong>输出资源</strong>：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的 Chunk，再把每个 Chunk 转换成一个单独的文件加入到输出列表，这步是可以修改输出内容的最后机会。</li>
<li><strong>输出完成</strong>：在确定好输出内容后，根据配置确定输出的路径和文件名，把文件内容写入到文件系统。</li>
</ol>
<p>在以上过程中，Webpack 会在特定的时间点广播出特定的事件，插件在监听到感兴趣的事件后会执行特定的逻辑，并且插件可以调用 Webpack 提供的 API 改变 Webpack 的运行结果。</p>
<h2 id="Loader"><a href="#Loader" class="headerlink" title="Loader"></a>Loader</h2><p>Loader 用于对模块的源代码进行转换，在 import 或”加载”模块时预处理文件</p>
<h3 id="1-配置方式"><a href="#1-配置方式" class="headerlink" title="1. 配置方式"></a>1. 配置方式</h3><p>Loader 的配置写在 <code>module.rules</code> 属性中：</p>
<ul>
<li>  <code>rules</code> 是一个数组的形式，可以配置很多个 Loader</li>
<li>  每一个 Loader 对应一个对象的形式，对象属性 <code>test</code> 为匹配的规则，一般情况为正则表达式</li>
<li>  属性 <code>use</code> 针对匹配到文件类型，调用对应的 Loader 进行处理</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">                use: [</span><br><span class="line">                    &#123; <span class="attr">loader</span>: <span class="string">&quot;style-loader&quot;</span> &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">loader</span>: <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">                        <span class="attr">options</span>: &#123;</span><br><span class="line">                            <span class="attr">modules</span>: <span class="literal">true</span>,</span><br><span class="line">                        &#125;,</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123; <span class="attr">loader</span>: <span class="string">&quot;sass-loader&quot;</span> &#125;,</span><br><span class="line">                ],</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="2-特性"><a href="#2-特性" class="headerlink" title="2. 特性"></a>2. 特性</h3><p>Loader 支持链式调用，链中的每个 Loader 会处理之前已处理过的资源，最终变为 js 代码，顺序为相反的顺序执行。</p>
<p>Loader 的特性：</p>
<ul>
<li>  Loader 可以是同步的，也可以是异步的</li>
<li>  Loader 运行在 Node.js 中，并且能够执行任何操作</li>
<li>  除了常见的通过 package.json 的 main 来将一个 npm 模块导出为 Loader，还可以在 module.rules 中使用 Loader 字段直接引用一个模块</li>
<li>  插件(plugin) 可以为 Loader 带来更多特性</li>
<li>  Loader 能够产生额外的任意文件</li>
</ul>
<h3 id="3-常见的-Loader"><a href="#3-常见的-Loader" class="headerlink" title="3. 常见的 Loader"></a>3. 常见的 Loader</h3><table>
<thead>
<tr>
<th>Loader</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>style-loader</td>
<td>将 css 添加到 DOM 的内联样式标签 <code>style</code> 里</td>
</tr>
<tr>
<td>css-loader</td>
<td>允许将 css 文件通过 <code>require</code> 的方式引入，并返回 css 代码</td>
</tr>
<tr>
<td>less-loader</td>
<td>处理 less</td>
</tr>
<tr>
<td>sass-loader</td>
<td>处理 sass</td>
</tr>
<tr>
<td>postcss-loader</td>
<td>用 postcss 来处理 CSS</td>
</tr>
<tr>
<td>autoprefixer-loader</td>
<td>处理 CSS3 属性前缀，已被弃用，建议直接使用 postcss</td>
</tr>
<tr>
<td>file-loader</td>
<td>分发文件到 output 目录并返回相对路径</td>
</tr>
<tr>
<td>url-loader</td>
<td>和 file-loader 类似，但是当文件小于设定的 limit 时可以返回一个 Data Url</td>
</tr>
<tr>
<td>html-minify-loader</td>
<td>压缩 HTML</td>
</tr>
<tr>
<td>babel-loader</td>
<td>用 babel 来转换 ES6 文件到 ES5</td>
</tr>
</tbody></table>
<h2 id="Plugin"><a href="#Plugin" class="headerlink" title="Plugin"></a>Plugin</h2><p>Plugin 赋予其各种灵活的功能，例如打包优化、资源管理、环境变量注入等，它们会运行在 Webpack 的不同阶段（钩子 / 生命周期），贯穿了 Webpack 整个编译周期。</p>
<p>Plugin 目的在于解决 Loader 无法实现的其他事。</p>
<h3 id="1-配置方式-1"><a href="#1-配置方式-1" class="headerlink" title="1. 配置方式"></a>1. 配置方式</h3><p>通过配置文件导出对象中 <code>plugins</code> 属性传入 new 实例对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&quot;html-Webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> Webpack = <span class="built_in">require</span>(<span class="string">&quot;Webpack&quot;</span>); <span class="comment">// 访问内置的插件</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> Webpack.ProgressPlugin(),</span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123; <span class="attr">template</span>: <span class="string">&quot;./src/index.html&quot;</span> &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="2-特性-1"><a href="#2-特性-1" class="headerlink" title="2. 特性"></a>2. 特性</h3><p>其本质是一个具有 <code>apply</code> 方法 javascript 对象</p>
<p><code>apply</code> 方法会被 Webpack compiler 调用，并且在整个编译生命周期都可以访问 compiler 对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pluginName = <span class="string">&quot;ConsoleLogOnBuildWebpackPlugin&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConsoleLogOnBuildWebpackPlugin</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">apply</span>(<span class="params">compiler</span>)</span> &#123;</span><br><span class="line">        compiler.hooks.run.tap(pluginName, <span class="function"><span class="params">compilation</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&quot;Webpack 构建过程开始！&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = ConsoleLogOnBuildWebpackPlugin;</span><br></pre></td></tr></table></figure>

<p>compiler hook 的 <code>tap</code> 方法的第一个参数，应是驼峰式命名的插件名称</p>
<p>关于整个编译生命周期钩子，有如下：</p>
<blockquote>
<ul>
<li>  <code>entry-option</code>：初始化 option</li>
<li>  <code>run</code></li>
<li>  <code>compile</code>：真正开始的编译，在创建 compilation 对象之前</li>
<li>  <code>compilation</code>：生成好了 compilation 对象</li>
<li>  <code>make</code>： 从 entry 开始递归分析依赖，准备对每个模块进行 build</li>
<li>  <code>after-compile</code>：编译 build 过程结束</li>
<li>  <code>emit</code>：在将内存中 assets 内容写到磁盘文件夹之前</li>
<li>  <code>after-emit</code>：在将内存中 assets 内容写到磁盘文件夹之后</li>
<li>  <code>done</code>：完成所有的编译过程</li>
<li>  <code>failed</code>：编译失败的时候</li>
</ul>
</blockquote>
<h3 id="3-常见的-Plugin"><a href="#3-常见的-Plugin" class="headerlink" title="3. 常见的 Plugin"></a>3. 常见的 Plugin</h3><table>
<thead>
<tr>
<th>Plugin</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>AggressiveSplittingPlugin</td>
<td>将原来的 chunk 分成更小的 chunk</td>
</tr>
<tr>
<td>BabelMinifyWebpackPlugin</td>
<td>使用 babel-minify 进行压缩</td>
</tr>
<tr>
<td>BannerPlugin</td>
<td>在每个生成的 chunk 顶部添加 banner</td>
</tr>
<tr>
<td>CommonsChunkPlugin</td>
<td>提取 chunks 之间共享的通用模块</td>
</tr>
<tr>
<td>CompressionWebpackPlugin</td>
<td>预先准备的资源压缩版本，使用 Content-Encoding 提供访问服务</td>
</tr>
<tr>
<td>ContextReplacementPlugin</td>
<td>重写 require 表达式的推断上下文</td>
</tr>
<tr>
<td>CopyWebpackPlugin</td>
<td>将单个文件或整个目录复制到构建目录</td>
</tr>
<tr>
<td>DefinePlugin</td>
<td>允许在编译时(compile time) 配置的全局常量</td>
</tr>
<tr>
<td>Dllplugin</td>
<td>为了极大减小构建时间，进行分离打包</td>
</tr>
<tr>
<td>EnvironmentPlugin</td>
<td>DefinePlugin 中的 process.env 键的简写方式</td>
</tr>
<tr>
<td>ExtractTextWebpackPlugin</td>
<td>从 bundel 中提取文本(CSS) 到单独的文件</td>
</tr>
<tr>
<td>HotModuleReplacementPlugin</td>
<td>启用模块热替换 (Enable Hot Module Replacement - HMR)</td>
</tr>
<tr>
<td>HtmlWebpackPlugin</td>
<td>简单创建 HTML 文件，用于服务器访问</td>
</tr>
<tr>
<td>I18nWebpackPlugin</td>
<td>为 bundle 增加国际化支持</td>
</tr>
<tr>
<td>IgnorePlugin</td>
<td>从 bundle 中排除某些模块</td>
</tr>
<tr>
<td>LimitChunkCountPlugin</td>
<td>设置 chunk 的最小/最大限制，以微调和控制 chunk</td>
</tr>
<tr>
<td>LoaderOptionsPlugin</td>
<td>用于从 Webpack1 迁移到 Webpack2</td>
</tr>
<tr>
<td>MinChunkSizePlugin</td>
<td>确保 chunk 大小超过指定限制</td>
</tr>
<tr>
<td>NoEmitOnErrorsPlugin</td>
<td>在输出阶段时，遇到编译错误跳过</td>
</tr>
<tr>
<td>NormalModuleReplacementPlugin</td>
<td>替换与正则表达式匹配的资源</td>
</tr>
</tbody></table>
<h2 id="Loader-和-Plugin-的区别"><a href="#Loader-和-Plugin-的区别" class="headerlink" title="Loader 和 Plugin 的区别"></a>Loader 和 Plugin 的区别</h2><ul>
<li>  Loader 运行在打包文件之前</li>
<li>  Plugin 在整个编译周期都起作用</li>
</ul>
<p>在 Webpack 运行的生命周期中会广播出许多事件，Plugin 可以监听这些事件，在合适的时机通过 Webpack 提供的 API 改变输出结果。</p>
<p>对于 Loader，实质是一个转换器，比如将 A.scss 或 A.less 转变为 B.css，单纯的文件转换过程。</p>
<h2 id="Webpack-热更新"><a href="#Webpack-热更新" class="headerlink" title="Webpack 热更新"></a>Webpack 热更新</h2><h3 id="1-实现原理"><a href="#1-实现原理" class="headerlink" title="1. 实现原理"></a>1. 实现原理</h3><img src="../.images/image-20210526112504058.png" alt="image-20210526112504058" style="width: 600px;">

<ul>
<li>  Webpack Compile：将 JS 源代码编译成 bundle.js</li>
<li>  HMR Server：用来将热更新的文件输出给 HMR Runtime</li>
<li>  Bundle Server：静态资源文件服务器，提供文件访问路径</li>
<li>  HMR Runtime：socket 服务器，会被注入到浏览器，更新文件的变化</li>
<li>  bundle.js：构建输出的文件</li>
<li>  在 HMR Runtime 和 HMR Server 之间建立 Websocket，即 4⃣️ ，用于实时更新文件变化</li>
</ul>
<h4 id="启动阶段"><a href="#启动阶段" class="headerlink" title="启动阶段"></a>启动阶段</h4><p>1 -&gt; 2 -&gt; A -&gt; B<br>在编写未经过 Webpack 打包的源代码后，Webpack Compile 将源代码和 HMR Runtime 一起编译成 bundle 文件，传输给 Bundle Server 静态资源服务器。</p>
<h4 id="更新阶段"><a href="#更新阶段" class="headerlink" title="更新阶段"></a>更新阶段</h4><p>1 -&gt; 2 -&gt; 3 -&gt; 4</p>
<p>当某一个文件或者模块发生变化时，Webpack 监听到文件变化对文件重新编译打包，编译生成唯一的 hash 值（下图 <code>h</code> 属性），这个 hash 值用来作为下一次热更新的标识。</p>
<p>根据变化的内容生成两个补丁文件：<code>manifest</code>（包含了 hash 和 chundId，用来说明变化的内容）和 <code>chunk.js</code> 模块。</p>
<p>由于 socket 服务器在 HMR Runtime 和 HMR Server 之间建立 Websocket 链接，当文件发生改动的时候，服务端会向浏览器推送一条消息，消息包含文件改动后生成的 hash 值，作为下一次热更新的标识。<br><img src="../.images/image-20210526145412513.png" alt="image-20210526145412513" style="width:600px;"></p>
<p>在浏览器接受到这条消息之前，浏览器已经在上一次 socket 消息中已经记住了此时的 hash 标识，这时候会去服务端获取变化内容的 manifest 文件。</p>
<p>mainfest 文件包含重新 build 生成的 hash 值，以及变化的模块（上图 <code>c</code> 属性）。</p>
<p>浏览器根据 manifest 文件获取模块变化的内容，从而触发 render 流程，实现局部模块更新。</p>
<h3 id="2-总结"><a href="#2-总结" class="headerlink" title="2. 总结"></a>2. 总结</h3><ul>
<li>  通过 <code>Webpack-dev-server</code> 创建两个服务器：提供静态资源的服务（express）和 Socket 服务</li>
<li>  express server 负责直接提供静态资源的服务（打包后的资源直接被浏览器请求和解析）</li>
<li>  socket server 是一个 Websocket 的长连接，双方可以通信</li>
<li>  当 socket server 监听到对应的模块发生变化时，会生成两个文件.json（manifest 文件）和.js 文件（update chunk）</li>
<li>  通过长连接，socket server 可以直接将这两个文件主动发送给客户端（浏览器）</li>
<li>  浏览器拿到两个新的文件后，通过 HMR runtime 机制，加载这两个文件，并且针对修改的模块进行更新</li>
</ul>
<h2 id="Webpack-Proxy"><a href="#Webpack-Proxy" class="headerlink" title="Webpack Proxy"></a>Webpack Proxy</h2><p>Webpack Proxy，即 Webpack 提供的代理服务，基本行为就是接收客户端发送的请求后转发给其他服务器，其目的是为了便于开发者在开发模式下解决跨域问题（浏览器安全策略限制）。</p>
<p>想要实现代理首先需要一个中间服务器，Webpack 中提供服务器的工具为 Webpack-dev-server。</p>
<h3 id="1-Webpack-dev-server"><a href="#1-Webpack-dev-server" class="headerlink" title="1. Webpack-dev-server"></a>1. Webpack-dev-server</h3><p>Webpack-dev-server 是 Webpack 官方推出的一款开发工具，将自动编译和自动刷新浏览器等一系列对开发友好的功能全部集成在了一起，目的是为了提高开发者日常的开发效率，<strong>「只适用在开发阶段」</strong></p>
<p>配置方面，在 Webpack 配置对象属性中通过 devServer 属性提供，如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./Webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">devServer</span>: &#123;</span><br><span class="line">        <span class="attr">contentBase</span>: path.join(__dirname, <span class="string">&quot;dist&quot;</span>),</span><br><span class="line">        <span class="attr">compress</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">port</span>: <span class="number">3000</span>,</span><br><span class="line">        <span class="attr">proxy</span>: &#123;</span><br><span class="line">            <span class="string">&quot;/api&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">target</span>: <span class="string">&quot;https://api.xxx.com&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>属性：</p>
<ul>
<li>  target：表示的是代理到的目标地址</li>
<li>  pathRewrite：默认情况下 <code>/api</code> 也会被写入到 URL 中，如果希望删除，可以使用 <code>pathRewrite</code></li>
<li>  secure：默认情况下不接收转发到 https 的服务器上，如果希望支持，可以设置为 <code>false</code></li>
<li>  changeOrigin：它表示是否更新代理后请求的 <code>headers</code> 中 <code>host</code> 地址</li>
</ul>
</blockquote>
<h3 id="2-工作原理"><a href="#2-工作原理" class="headerlink" title="2. 工作原理"></a>2. 工作原理</h3><p>proxy 工作原理实质上是利用 <code>http-proxy-middleware</code> 这个 http 代理中间件，实现请求转发给其他服务器。</p>
<h3 id="3-跨域"><a href="#3-跨域" class="headerlink" title="3. 跨域"></a>3. 跨域</h3><p>在开发阶段， Webpack-dev-server 会启动一个本地开发服务器，所以我们的应用在开发阶段是独立运行在 localhost 的一个端口上，而后端服务又是运行在另外一个地址上，所以在开发阶段中，由于浏览器同源策略的原因，当本地访问后端就会出现跨域请求的问题。</p>
<p>通过设置 Webpack proxy 实现代理请求后，相当于浏览器与服务端中添加一个代理者，当本地发送请求的时候，代理服务器响应该请求，并将请求转发到目标服务器，目标服务器响应数据后再将数据返回给代理服务器，最终再由代理服务器将数据响应给本地。</p>
<p><strong>注意：「服务器与服务器之间请求数据并不会存在跨域行为，跨域行为是浏览器安全策略限制」</strong></p>
<h2 id="前端性能优化"><a href="#前端性能优化" class="headerlink" title="前端性能优化"></a>前端性能优化</h2><h3 id="1-JS-代码压缩"><a href="#1-JS-代码压缩" class="headerlink" title="1. JS 代码压缩"></a>1. JS 代码压缩</h3><p><code>terser</code> 是一个 JavaScript 的解释、绞肉机、压缩机的工具集，可以帮助我们压缩、丑化我们的代码，让 bundle 更小</p>
<p>在 <code>production</code> 模式下，Webpack 默认使用 TerserPlugin 来处理代码。自定义配置方法如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> TerserPlugin = <span class="built_in">require</span>(<span class="string">&quot;terser-Webpack-plugin&quot;</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">optimization</span>: &#123;</span><br><span class="line">        <span class="attr">minimize</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">minimizer</span>: [</span><br><span class="line">            <span class="keyword">new</span> TerserPlugin(&#123;</span><br><span class="line">                <span class="attr">parallel</span>: <span class="literal">true</span>, <span class="comment">// 电脑cpu核数-1</span></span><br><span class="line">            &#125;),</span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>属性：</p>
<ul>
<li><p>  extractComments：默认值为 <code>true</code>，表示会将注释抽取到一个单独的文件中，开发阶段，我们可设置为 <code>false</code> ，不保留注释</p>
</li>
<li><p>  parallel：使用多进程并发运行提高构建的速度，默认值是 <code>true</code>，并发运行的默认数量：<code>os.cpus().length - 1</code></p>
</li>
<li><p>terserOptions：设置我们的 terser 相关的配置：</p>
<p>  compress：设置压缩相关的选项<br>  mangle：设置丑化相关的选项，可以直接设置为 <code>true</code><br>  toplevel：底层变量是否进行转换<br>  keep_classnames：保留类的名称<br>  keep_fnames：保留函数的名称</p>
</li>
</ul>
</blockquote>
<h3 id="2-CSS-代码压缩"><a href="#2-CSS-代码压缩" class="headerlink" title="2. CSS 代码压缩"></a>2. CSS 代码压缩</h3><p>使用 <code>css-minimizer-Webpack-plugin</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install css-minimizer-Webpack-plugin -D</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> CssMinimizerPlugin = <span class="built_in">require</span>(<span class="string">&quot;css-minimizer-Webpack-plugin&quot;</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">optimization</span>: &#123;</span><br><span class="line">        <span class="attr">minimize</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">minimizer</span>: [</span><br><span class="line">            <span class="keyword">new</span> CssMinimizerPlugin(&#123;</span><br><span class="line">                <span class="attr">parallel</span>: <span class="literal">true</span>,</span><br><span class="line">            &#125;),</span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="3-HTML-文件代码压缩"><a href="#3-HTML-文件代码压缩" class="headerlink" title="3. HTML 文件代码压缩"></a>3. HTML 文件代码压缩</h3><p>使用 <code>HtmlWebpackPlugin</code> 插件来生成 HTML 的模板时候，通过配置属性 <code>minify</code> 进行 html 优化。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">plugin</span>: [</span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            <span class="attr">minify</span>: &#123;</span><br><span class="line">                <span class="attr">minifyCSS</span>: <span class="literal">false</span>, <span class="comment">// 是否压缩css</span></span><br><span class="line">                <span class="attr">collapseWhitespace</span>: <span class="literal">false</span>, <span class="comment">// 是否折叠空格</span></span><br><span class="line">                <span class="attr">removeComments</span>: <span class="literal">true</span>, <span class="comment">// 是否移除注释</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>设置了 <code>minify</code>，实际会使用另一个插件 <code>html-minifier-terser</code></p>
<h3 id="4-文件大小压缩"><a href="#4-文件大小压缩" class="headerlink" title="4. 文件大小压缩"></a>4. 文件大小压缩</h3><p>对文件的大小进行压缩，减少 http 传输过程中宽带的损耗，使用 <code>compression-Webpack-plugin</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> ComepressionPlugin(&#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.(css|js)$/</span>, <span class="comment">// 哪些文件需要压缩</span></span><br><span class="line">    threshold: <span class="number">500</span>, <span class="comment">// 设置文件多大开始压缩</span></span><br><span class="line">    <span class="attr">minRatio</span>: <span class="number">0.7</span>, <span class="comment">// 至少压缩的比例</span></span><br><span class="line">    <span class="attr">algorithm</span>: <span class="string">&quot;gzip&quot;</span>, <span class="comment">// 采用的压缩算法</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="5-图片压缩"><a href="#5-图片压缩" class="headerlink" title="5. 图片压缩"></a>5. 图片压缩</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">            use: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">loader</span>: <span class="string">&quot;file-loader&quot;</span>,</span><br><span class="line">                    <span class="attr">options</span>: &#123;</span><br><span class="line">                        <span class="attr">name</span>: <span class="string">&quot;[name]_[hash].[ext]&quot;</span>,</span><br><span class="line">                        <span class="attr">outputPath</span>: <span class="string">&quot;images/&quot;</span>,</span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">loader</span>: <span class="string">&quot;image-Webpack-loader&quot;</span>,</span><br><span class="line">                    <span class="attr">options</span>: &#123;</span><br><span class="line">                        <span class="comment">// 压缩 jpeg 的配置</span></span><br><span class="line">                        <span class="attr">mozjpeg</span>: &#123;</span><br><span class="line">                            <span class="attr">progressive</span>: <span class="literal">true</span>,</span><br><span class="line">                            <span class="attr">quality</span>: <span class="number">65</span>,</span><br><span class="line">                        &#125;,</span><br><span class="line">                        <span class="comment">// 使用 imagemin**-optipng 压缩 png，enable: false 为关闭</span></span><br><span class="line">                        <span class="attr">optipng</span>: &#123;</span><br><span class="line">                            <span class="attr">enabled</span>: <span class="literal">false</span>,</span><br><span class="line">                        &#125;,</span><br><span class="line">                        <span class="comment">// 使用 imagemin-pngquant 压缩 png</span></span><br><span class="line">                        <span class="attr">pngquant</span>: &#123;</span><br><span class="line">                            <span class="attr">quality</span>: <span class="string">&quot;65-90&quot;</span>,</span><br><span class="line">                            <span class="attr">speed</span>: <span class="number">4</span>,</span><br><span class="line">                        &#125;,</span><br><span class="line">                        <span class="comment">// 压缩 gif 的配置</span></span><br><span class="line">                        <span class="attr">gifsicle</span>: &#123;</span><br><span class="line">                            <span class="attr">interlaced</span>: <span class="literal">false</span>,</span><br><span class="line">                        &#125;,</span><br><span class="line">                        <span class="comment">// 开启 webp，会把 jpg 和 png 图片压缩为 webp 格式</span></span><br><span class="line">                        <span class="attr">webp</span>: &#123;</span><br><span class="line">                            <span class="attr">quality</span>: <span class="number">75</span>,</span><br><span class="line">                        &#125;,</span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;,</span><br><span class="line">            ],</span><br><span class="line">        &#125;,</span><br><span class="line">    ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-Tree-Shaking"><a href="#6-Tree-Shaking" class="headerlink" title="6. Tree Shaking"></a>6. Tree Shaking</h3><p>Tree Shaking 是一个术语，在计算机中表示消除死代码，依赖于 ES Module 的静态语法分析（不执行任何的代码，可以明确知道模块的依赖关系）。</p>
<p>在 Webpack 实现 Tree shaking 有两种不同的方案：</p>
<ul>
<li>  usedExports：通过标记某些函数是否被使用，之后通过 Terser 来进行优化的</li>
<li>sideEffects：跳过整个模块/文件，直接查看该文件是否有副作用<br>  两种不同的配置方案， 有不同的效果</li>
</ul>
<h4 id="usedExports"><a href="#usedExports" class="headerlink" title="usedExports"></a>usedExports</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">optimization</span>: &#123;</span><br><span class="line">        <span class="attr">usedExports</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>使用之后，没被用上的代码在 Webpack 打包中会加入 <code>/* unused harmony export mul */</code> 注释，用来告知 Terser 在优化时，可以删除掉这段代码。</p>
<h4 id="sideEffects"><a href="#sideEffects" class="headerlink" title="sideEffects"></a>sideEffects</h4><p>sideEffects 用于告知 Webpack Compiler 哪些模块时有副作用，配置方法是在 <code>package.json</code> 中设置 <code>sideEffects</code> 属性。</p>
<p>如果 sideEffects 设置为 <code>false</code>，就是告知 Webpack 可以安全的删除未用到的 exports。如果有些文件需要保留，可以设置为数组的形式。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;sideEffects&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;./src/util/format.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;*.css&quot;</span> <span class="comment">// 所有的css文件</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="css-tree-shaking"><a href="#css-tree-shaking" class="headerlink" title="css tree shaking"></a>css tree shaking</h4><p>css 进行 tree shaking 优化可以安装 <code>PurgeCss</code> 插件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PurgeCssPlugin = <span class="built_in">require</span>(<span class="string">&quot;purgecss-Webpack-plugin&quot;</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> PurgeCssPlugin(&#123;</span><br><span class="line">            <span class="attr">path</span>: glob.sync(<span class="string">`<span class="subst">$&#123;path.resolve(<span class="string">&quot;./src&quot;</span>)&#125;</span>/**/*`</span>),</span><br><span class="line">            <span class="attr">nodir</span>: <span class="literal">true</span>, <span class="comment">// src里面的所有文件</span></span><br><span class="line">            <span class="attr">satelist</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> &#123;</span><br><span class="line">                    <span class="attr">standard</span>: [<span class="string">&quot;html&quot;</span>],</span><br><span class="line">                &#125;;</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>paths：表示要检测哪些目录下的内容需要被分析，配合使用 glob。<br>默认情况下，PurgeCss 会将我们的 html 标签的样式移除掉，如果我们希望保留，可以添加一个 <code>safelist</code> 的属性。</p>
</blockquote>
<h3 id="7-代码分割-Code-Splitting"><a href="#7-代码分割-Code-Splitting" class="headerlink" title="7. 代码分割 (Code Splitting)"></a>7. 代码分割 (Code Splitting)</h3><p>将代码分离到不同的 bundle 中，之后我们可以按需加载，或者并行加载这些文件。</p>
<p>默认情况下，所有的 JavaScript 代码（业务代码、第三方依赖、暂时没有用到的模块）在首页全部都加载，就会影响首页的加载速度。</p>
<p>代码分离可以分出出更小的 bundle，以及控制资源加载优先级，提供代码的加载性能。</p>
<p>这里通过 <code>splitChunksPlugin</code> 来实现，该插件 Webpack 已经默认安装和集成，只需要配置即可。默认配置中，chunks 仅仅针对于异步（async）请求，我们可以设置为 <code>initial</code> 或者 <code>all</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">optimization</span>: &#123;</span><br><span class="line">        <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">        <span class="attr">minSize</span>: <span class="number">30000</span>,</span><br><span class="line">        <span class="attr">maxInitialRequests</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">cacheGroups</span>: &#123;</span><br><span class="line">          <span class="attr">lib</span>: &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;vendors&#x27;</span>,</span><br><span class="line">            <span class="attr">priority</span>: <span class="number">10</span>,</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/[\\/]node_modules[\\/]/</span>,</span><br><span class="line">            chunks: <span class="string">&#x27;initial&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">react</span>: &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;react&#x27;</span>,</span><br><span class="line">            <span class="attr">priority</span>: <span class="number">20</span>,</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/[\\/]node_modules[\\/]react[\\/]/</span>,</span><br><span class="line">            chunks: <span class="string">&#x27;all&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">antd</span>: &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;antd&#x27;</span>,</span><br><span class="line">            <span class="attr">priority</span>: <span class="number">20</span>,</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/[\\/]node_modules[\\/]antd[\\/]/</span>,</span><br><span class="line">            chunks: <span class="string">&#x27;all&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">moment</span>: &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;moment&#x27;</span>,</span><br><span class="line">            <span class="attr">priority</span>: <span class="number">20</span>,</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/[\\/]node_modules[\\/]moment[\\/]/</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">default</span>: &#123;</span><br><span class="line">            <span class="attr">minChunks</span>: <span class="number">2</span>,</span><br><span class="line">            <span class="attr">priority</span>: -<span class="number">20</span>,</span><br><span class="line">            <span class="attr">reuseExistingChunk</span>: <span class="literal">true</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>minSize：拆分包的大小，至少为 minSize，如何包的大小不超过 minSize，这个包不会拆分<br>maxSize：将大于 maxSize 的包，拆分为不小于 minSize 的包</p>
</blockquote>
<h4 id="chunks"><a href="#chunks" class="headerlink" title="chunks"></a>chunks</h4><ol>
<li><code>async</code> 表示只从异步加载得模块（动态加载 <code>import()</code>）里面进行拆分</li>
<li><code>initial</code> 表示只从入口模块进行拆分</li>
<li><code>all</code> 表示以上两者都包括</li>
</ol>
<h4 id="cacheGroups"><a href="#cacheGroups" class="headerlink" title="cacheGroups"></a>cacheGroups</h4><ol>
<li><code>name</code>：chunk 的文件名</li>
<li><code>test</code>：过滤 modules，默认为所有的 modules，可匹配模块路径或 chunk 名字，当匹配到某个 chunk 的名字时，这个 chunk 里面引入的所有 module 都会选中</li>
<li><code>priority</code>：权重，数字越大表示优先级越高。一个 module 可能会满足多个 cacheGroups 的正则匹配，到底将哪个缓存组应用于这个 module，取决于优先级</li>
<li><code>reuseExistingChunk</code>：是否使用已有的 chunk，true 则表示如果当前的 chunk 包含的模块已经被抽取出去了，那么将不会重新生成新的，即几个 chunk 复用被拆分出去的一个 module</li>
</ol>
<h3 id="8-内联-chunk"><a href="#8-内联-chunk" class="headerlink" title="8. 内联 chunk"></a>8. 内联 chunk</h3><p>可以通过 <code>InlineChunkHtmlPlugin</code> 插件将一些 chunk 的模块内联到 html，如 runtime 的代码（对模块进行解析、加载、模块信息相关的代码），代码量并不大，但是必须加载的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> InlineChunkHtmlPlugin = <span class="built_in">require</span>(<span class="string">&quot;react-dev-utils/InlineChunkHtmlPlugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&quot;html-Webpack-plugin&quot;</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">plugin</span>: [<span class="keyword">new</span> InlineChunkHtmlPlugin(HtmlWebpackPlugin, [<span class="regexp">/runtime.+\.js/</span>])],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="9-总结"><a href="#9-总结" class="headerlink" title="9. 总结"></a>9. 总结</h3><p>关于 Webpack 对前端性能的优化，可以通过文件体积大小入手，其次还可通过分包的形式、减少 http 请求次数等方式，实现对前端性能的优化。</p>
<h2 id="提高-Webpack-的构建速度"><a href="#提高-Webpack-的构建速度" class="headerlink" title="提高 Webpack 的构建速度"></a>提高 Webpack 的构建速度</h2><h3 id="1-优化-Loader-配置"><a href="#1-优化-Loader-配置" class="headerlink" title="1. 优化 Loader 配置"></a>1. 优化 Loader 配置</h3><p>通过配置 include、exclude、test 属性来匹配文件，接触 include、exclude 规定哪些匹配应用 loader。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置 babel-loader</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// 如果项目源码中只有 js 文件就不要写成 /\.jsx?$/，提升正则表达式性能</span></span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">                <span class="comment">// babel-loader 支持缓存转换出的结果，通过 cacheDirectory 选项开启</span></span><br><span class="line">                use: [<span class="string">&quot;babel-loader?cacheDirectory&quot;</span>],</span><br><span class="line">                <span class="comment">// 只对项目根目录下的 src 目录中的文件采用 babel-loader</span></span><br><span class="line">                <span class="attr">include</span>: path.resolve(__dirname, <span class="string">&quot;src&quot;</span>),</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="2-合理使用-resolve-extensions"><a href="#2-合理使用-resolve-extensions" class="headerlink" title="2. 合理使用 resolve.extensions"></a>2. 合理使用 resolve.extensions</h3><p>通过 <code>resolve.extensions</code> 是解析到文件时自动添加扩展名，默认情况如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">extensions</span>: [<span class="string">&quot;.warm&quot;</span>, <span class="string">&quot;.mjs&quot;</span>, <span class="string">&quot;.js&quot;</span>, <span class="string">&quot;.json&quot;</span>],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>引入文件的时候，若没有文件后缀名，则会根据数组内的值依次查找。配置的时候，不要随便把所有后缀都写在里面，这会调用多次文件的查找，减慢打包速度。</p>
<h3 id="3-优化-resolve-modules"><a href="#3-优化-resolve-modules" class="headerlink" title="3. 优化 resolve.modules"></a>3. 优化 resolve.modules</h3><p><code>resolve.modules</code> 用于配置 Webpack 去哪些目录下寻找第三方模块。默认值为 <code>[&#39;node_modules&#39;]</code> ，所以默认会从 node_modules 中查找文件 当安装的第三方模块都放在项目根目录下的 <code>./node_modules</code> 目录下时，所以可以指明存放第三方模块的绝对路径，以减少寻找，配置如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">resolve</span>: &#123;</span><br><span class="line">        <span class="comment">// 使用绝对路径指明第三方模块存放的位置，以减少搜索步骤</span></span><br><span class="line">        <span class="comment">// 其中 __dirname 表示当前工作目录，也就是项目根目录</span></span><br><span class="line">        <span class="attr">modules</span>: [path.resolve(__dirname, <span class="string">&quot;node_modules&quot;</span>)],</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="4-优化-resolve-alias"><a href="#4-优化-resolve-alias" class="headerlink" title="4. 优化 resolve.alias"></a>4. 优化 resolve.alias</h3><p>alias 给一些常用的路径起一个别名，特别当我们的项目目录结构比较深的时候，一个文件的路径可能是 <code>../../../</code> 的形式。</p>
<p>通过配置 alias 以减少查找过程：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">resolve</span>: &#123;</span><br><span class="line">        <span class="attr">alias</span>: &#123;</span><br><span class="line">            <span class="string">&quot;@&quot;</span>: path.resolve(__dirname, <span class="string">&quot;./src&quot;</span>),</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="5-使用-DLLPlugin-插件"><a href="#5-使用-DLLPlugin-插件" class="headerlink" title="5. 使用 DLLPlugin 插件"></a>5. 使用 DLLPlugin 插件</h3><p>DLL 全称是 动态链接库，是为软件在 Windows 中实现共享函数库的一种实现方式，而 Webpack 也内置了 DLL 的功能，为的就是可以共享，不经常改变的代码，抽成一个共享的库。这个库在之后的编译过程中，会被引入到其他项目的代码中</p>
<p>使用步骤分成两部分：</p>
<ul>
<li>  打包一个 DLL 库</li>
<li>  引入 DLL 库</li>
</ul>
<h4 id="打包一个-DLL-库"><a href="#打包一个-DLL-库" class="headerlink" title="打包一个 DLL 库"></a>打包一个 DLL 库</h4><p>Webpack 内置了一个 DllPlugin 可以帮助我们打包一个 DLL 的库文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> Webpack.DllPlugin(&#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&quot;dll_[name]&quot;</span>,</span><br><span class="line">            <span class="attr">path</span>: path.resolve(__dirname, <span class="string">&quot;./dll/[name].mainfest.json&quot;</span>),</span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="引入-DLL-库"><a href="#引入-DLL-库" class="headerlink" title="引入 DLL 库"></a>引入 DLL 库</h4><p>使用 Webpack 自带的 <code>DllReferencePlugin</code> 插件对 <code>mainfest.json</code> 映射文件进行分析，获取要使用的 DLL 库，然后再通过 <code>AddAssetHtmlPlugin</code> 插件，将打包的 DLL 库引入到 Html 模块中。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> Webpack.DllReferencePlugin(&#123;</span><br><span class="line">            <span class="attr">context</span>: path.resolve(__dirname, <span class="string">&quot;./dll/dll_react.js&quot;</span>),</span><br><span class="line">            <span class="attr">mainfest</span>: path.resolve(__dirname, <span class="string">&quot;./dll/react.mainfest.json&quot;</span>),</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> AddAssetHtmlPlugin(&#123;</span><br><span class="line">            <span class="attr">outputPath</span>: <span class="string">&quot;./auto&quot;</span>,</span><br><span class="line">            <span class="attr">filepath</span>: path.resolve(__dirname, <span class="string">&quot;./dll/dll_react.js&quot;</span>),</span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="6-使用-cache-loader"><a href="#6-使用-cache-loader" class="headerlink" title="6. 使用 cache-loader"></a>6. 使用 cache-loader</h3><p>在一些性能开销较大的 loader 之前添加 <code>cache-loader</code>，以将结果缓存到磁盘里，显著提升二次构建速度。</p>
<p>保存和读取这些缓存文件会有一些时间开销，所以应只对性能开销较大的 loader 使用此 loader。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\.ext$/</span>,</span><br><span class="line">                use: [<span class="string">&quot;cache-loader&quot;</span>, ...loaders],</span><br><span class="line">                <span class="attr">include</span>: path.resolve(<span class="string">&quot;src&quot;</span>),</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="7-terser-启动多线程"><a href="#7-terser-启动多线程" class="headerlink" title="7. terser 启动多线程"></a>7. terser 启动多线程</h3><p>使用多进程并行运行来提高构建速度。</p>
<p>TerserWebpackPlugin 插件使用 terser 来压缩 JavaScript。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">optimization</span>: &#123;</span><br><span class="line">        <span class="attr">minimizer</span>: [</span><br><span class="line">            <span class="keyword">new</span> TerserPlugin(&#123;</span><br><span class="line">                <span class="attr">parallel</span>: <span class="literal">true</span>,</span><br><span class="line">            &#125;),</span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="8-合理使用-sourceMap"><a href="#8-合理使用-sourceMap" class="headerlink" title="8. 合理使用 sourceMap"></a>8. 合理使用 sourceMap</h3><p>打包生成 sourceMap 的时候，如果信息越详细，打包速度就会越慢。对应属性取值如下所示：</p>
<table>
<thead>
<tr>
<th>devtool</th>
<th>构建速度</th>
<th>重新构建速度</th>
<th>生产环境</th>
<th>品质(quality)</th>
</tr>
</thead>
<tbody><tr>
<td>(none)</td>
<td>+++</td>
<td>+++</td>
<td>yes</td>
<td>打包后的代码</td>
</tr>
<tr>
<td>eval</td>
<td>+++</td>
<td>+++</td>
<td>no</td>
<td>生成后的代码</td>
</tr>
<tr>
<td>cheap-eval-source-map</td>
<td>+</td>
<td>++</td>
<td>no</td>
<td>转换过的代码 (仅限行)</td>
</tr>
<tr>
<td>cheap-module-eval-source-map</td>
<td>o</td>
<td>++</td>
<td>no</td>
<td>原始源代码 (仅限行)</td>
</tr>
<tr>
<td>eval-source-map</td>
<td>–</td>
<td>+</td>
<td>no</td>
<td>原始源代码</td>
</tr>
<tr>
<td>cheap-source-map</td>
<td>+</td>
<td>o</td>
<td>yes</td>
<td>转换过的代码 (仅限行)</td>
</tr>
<tr>
<td>cheap-module-source-map</td>
<td>o</td>
<td>-</td>
<td>yes</td>
<td>原始源代码 (仅限行)</td>
</tr>
<tr>
<td>inline-cheap-source-map</td>
<td>+</td>
<td>o</td>
<td>no</td>
<td>转换过的代码 (仅限行)</td>
</tr>
<tr>
<td>inline-cheap-module-source-map</td>
<td>o</td>
<td>-</td>
<td>no</td>
<td>原始源代码 (仅限行)</td>
</tr>
<tr>
<td>source-map</td>
<td>–</td>
<td>–</td>
<td>yes</td>
<td>原始源代码</td>
</tr>
<tr>
<td>inline-source-map</td>
<td>–</td>
<td>–</td>
<td>no</td>
<td>原始源代码</td>
</tr>
<tr>
<td>hidden-source-map</td>
<td>–</td>
<td>–</td>
<td>yes</td>
<td>原始源代码</td>
</tr>
<tr>
<td>nosources-source-map</td>
<td>–</td>
<td>–</td>
<td>yes</td>
<td>无源代码内容</td>
</tr>
</tbody></table>
<blockquote>
<p>+++ 非常快速 &emsp; ++ 快速 &emsp; + 比较快 &emsp; o 中等 &emsp; - 比较慢 &emsp; – 慢</p>
</blockquote>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>优化 Webpack 构建的方式有很多，主要可以从优化搜索时间、缩小文件搜索范围、减少不必要的编译等方面入手。</p>
<h2 id="Webpack-与-grunt、gulp-有什么不同"><a href="#Webpack-与-grunt、gulp-有什么不同" class="headerlink" title="Webpack 与 grunt、gulp 有什么不同"></a>Webpack 与 grunt、gulp 有什么不同</h2><img src="../.images/image-20210526232017808.png" alt="image-20210526232017808" style="width: 600px;">

<p>从上图中可以看出来三者都不在一个频道，自然没有可比性。</p>
<p>grunt 和 gulp 在早期比较流行，属于前端工具类，主要优化前端工作流程，比如自动刷新页面、combo、压缩 css、js、css 预编译等等。</p>
<p>现在 Webpack 相对来说比较主流，属于预编译模块的方案，不需要在浏览器中加载解释器。另外，在本地直接写 JS，不管是 AMD / CMD / ES6 风格的模块化，Webpack 都能认识，并且编译成浏览器认识的 js。</p>
<h3 id="使用上的区别"><a href="#使用上的区别" class="headerlink" title="使用上的区别"></a>使用上的区别</h3><p>grunt 和 gulp 是基于任务和流（Task、Stream）的。类似 jQuery，找到一个（或一类）文件，对其做一系列链式操作，更新流上的数据， 整条链式操作构成了一个任务，多个任务就构成了整个 web 的构建流程。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">&quot;dev&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 这个任务的名称是 dev</span></span><br><span class="line">    gulp.src(<span class="string">&quot;src/js/*.js&quot;</span>) <span class="comment">//找到 `src/js/` 目录下的所有js</span></span><br><span class="line">        .pipe(concat(<span class="string">&quot;all.js&quot;</span>)) <span class="comment">//对其进行合并并且命名为 `all.js`</span></span><br><span class="line">        .pipe(uglify()) <span class="comment">//压缩</span></span><br><span class="line">        .pipe(rename(<span class="string">&quot;all.min.js&quot;</span>)) <span class="comment">//重命名</span></span><br><span class="line">        .pipe(gulp.dest(<span class="string">&quot;dist/js/&quot;</span>)); <span class="comment">//输出压缩后的js</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//在目录下执行 `gulp dev` 即可执行上述操作</span></span><br><span class="line"><span class="comment">//grunt 与 gulp 类似，只是稍微繁索一些，现在基本上用不上了</span></span><br></pre></td></tr></table></figure>

<p>Webpack 是基于入口的。会自动地递归解析入口所需要加载的所有资源文件，然后用不同的 Loader 来处理不同的文件，用 Plugin 来扩展 Webpack 功能。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Webpack 具体配置这里不做讲解，形式都大同小异</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">entry</span>: <span class="string">&quot;./entry.js&quot;</span>, <span class="comment">//入口文件</span></span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&quot;./bundle.js&quot;</span>, <span class="comment">//输出文件</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">loaders</span>: [...loaders],</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>从构建思路来说，gulp 和 grunt 需要开发者将整个前端构建过程拆分成多个 Task，并合理控制所有 Task 的调用关系<br>Webpack 需要开发者找到入口，并需要清楚对于不同的资源应该使用什么 Loader 做何种解析和加工。</p>
<h3 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h3><ul>
<li>  gulp、grunt 是 web 构建工具</li>
<li>  Webpack 是模块化方案</li>
<li>  gulp、grunt 是基于任务和流</li>
<li>  Webpack 基于入口文件</li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/webpack/" rel="tag"># webpack</a>
          </div>

        


        
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Webpack"><span class="nav-number">1.</span> <span class="nav-text">Webpack</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-Webpack"><span class="nav-number">1.1.</span> <span class="nav-text">什么是 Webpack</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Webpack-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="nav-number">1.2.</span> <span class="nav-text">Webpack 核心概念</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Entry"><span class="nav-number">1.2.1.</span> <span class="nav-text">1. Entry</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Output"><span class="nav-number">1.2.2.</span> <span class="nav-text">2. Output</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Module"><span class="nav-number">1.2.3.</span> <span class="nav-text">3. Module</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Chunk"><span class="nav-number">1.2.4.</span> <span class="nav-text">4. Chunk</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-Loader"><span class="nav-number">1.2.5.</span> <span class="nav-text">5. Loader</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-Plugin"><span class="nav-number">1.2.6.</span> <span class="nav-text">6. Plugin</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Webpack-%E6%9E%84%E5%BB%BA%E6%B5%81%E7%A8%8B"><span class="nav-number">1.3.</span> <span class="nav-text">Webpack 构建流程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Loader"><span class="nav-number">1.4.</span> <span class="nav-text">Loader</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F"><span class="nav-number">1.4.1.</span> <span class="nav-text">1. 配置方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E7%89%B9%E6%80%A7"><span class="nav-number">1.4.2.</span> <span class="nav-text">2. 特性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%B8%B8%E8%A7%81%E7%9A%84-Loader"><span class="nav-number">1.4.3.</span> <span class="nav-text">3. 常见的 Loader</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Plugin"><span class="nav-number">1.5.</span> <span class="nav-text">Plugin</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F-1"><span class="nav-number">1.5.1.</span> <span class="nav-text">1. 配置方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E7%89%B9%E6%80%A7-1"><span class="nav-number">1.5.2.</span> <span class="nav-text">2. 特性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%B8%B8%E8%A7%81%E7%9A%84-Plugin"><span class="nav-number">1.5.3.</span> <span class="nav-text">3. 常见的 Plugin</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Loader-%E5%92%8C-Plugin-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">1.6.</span> <span class="nav-text">Loader 和 Plugin 的区别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Webpack-%E7%83%AD%E6%9B%B4%E6%96%B0"><span class="nav-number">1.7.</span> <span class="nav-text">Webpack 热更新</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="nav-number">1.7.1.</span> <span class="nav-text">1. 实现原理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8%E9%98%B6%E6%AE%B5"><span class="nav-number">1.7.1.1.</span> <span class="nav-text">启动阶段</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9B%B4%E6%96%B0%E9%98%B6%E6%AE%B5"><span class="nav-number">1.7.1.2.</span> <span class="nav-text">更新阶段</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%80%BB%E7%BB%93"><span class="nav-number">1.7.2.</span> <span class="nav-text">2. 总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Webpack-Proxy"><span class="nav-number">1.8.</span> <span class="nav-text">Webpack Proxy</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Webpack-dev-server"><span class="nav-number">1.8.1.</span> <span class="nav-text">1. Webpack-dev-server</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-number">1.8.2.</span> <span class="nav-text">2. 工作原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E8%B7%A8%E5%9F%9F"><span class="nav-number">1.8.3.</span> <span class="nav-text">3. 跨域</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="nav-number">1.9.</span> <span class="nav-text">前端性能优化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-JS-%E4%BB%A3%E7%A0%81%E5%8E%8B%E7%BC%A9"><span class="nav-number">1.9.1.</span> <span class="nav-text">1. JS 代码压缩</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-CSS-%E4%BB%A3%E7%A0%81%E5%8E%8B%E7%BC%A9"><span class="nav-number">1.9.2.</span> <span class="nav-text">2. CSS 代码压缩</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-HTML-%E6%96%87%E4%BB%B6%E4%BB%A3%E7%A0%81%E5%8E%8B%E7%BC%A9"><span class="nav-number">1.9.3.</span> <span class="nav-text">3. HTML 文件代码压缩</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F%E5%8E%8B%E7%BC%A9"><span class="nav-number">1.9.4.</span> <span class="nav-text">4. 文件大小压缩</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9"><span class="nav-number">1.9.5.</span> <span class="nav-text">5. 图片压缩</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-Tree-Shaking"><span class="nav-number">1.9.6.</span> <span class="nav-text">6. Tree Shaking</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#usedExports"><span class="nav-number">1.9.6.1.</span> <span class="nav-text">usedExports</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sideEffects"><span class="nav-number">1.9.6.2.</span> <span class="nav-text">sideEffects</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#css-tree-shaking"><span class="nav-number">1.9.6.3.</span> <span class="nav-text">css tree shaking</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-%E4%BB%A3%E7%A0%81%E5%88%86%E5%89%B2-Code-Splitting"><span class="nav-number">1.9.7.</span> <span class="nav-text">7. 代码分割 (Code Splitting)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#chunks"><span class="nav-number">1.9.7.1.</span> <span class="nav-text">chunks</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cacheGroups"><span class="nav-number">1.9.7.2.</span> <span class="nav-text">cacheGroups</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-%E5%86%85%E8%81%94-chunk"><span class="nav-number">1.9.8.</span> <span class="nav-text">8. 内联 chunk</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-%E6%80%BB%E7%BB%93"><span class="nav-number">1.9.9.</span> <span class="nav-text">9. 总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8F%90%E9%AB%98-Webpack-%E7%9A%84%E6%9E%84%E5%BB%BA%E9%80%9F%E5%BA%A6"><span class="nav-number">1.10.</span> <span class="nav-text">提高 Webpack 的构建速度</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E4%BC%98%E5%8C%96-Loader-%E9%85%8D%E7%BD%AE"><span class="nav-number">1.10.1.</span> <span class="nav-text">1. 优化 Loader 配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%90%88%E7%90%86%E4%BD%BF%E7%94%A8-resolve-extensions"><span class="nav-number">1.10.2.</span> <span class="nav-text">2. 合理使用 resolve.extensions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E4%BC%98%E5%8C%96-resolve-modules"><span class="nav-number">1.10.3.</span> <span class="nav-text">3. 优化 resolve.modules</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E4%BC%98%E5%8C%96-resolve-alias"><span class="nav-number">1.10.4.</span> <span class="nav-text">4. 优化 resolve.alias</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E4%BD%BF%E7%94%A8-DLLPlugin-%E6%8F%92%E4%BB%B6"><span class="nav-number">1.10.5.</span> <span class="nav-text">5. 使用 DLLPlugin 插件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%93%E5%8C%85%E4%B8%80%E4%B8%AA-DLL-%E5%BA%93"><span class="nav-number">1.10.5.1.</span> <span class="nav-text">打包一个 DLL 库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%95%E5%85%A5-DLL-%E5%BA%93"><span class="nav-number">1.10.5.2.</span> <span class="nav-text">引入 DLL 库</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E4%BD%BF%E7%94%A8-cache-loader"><span class="nav-number">1.10.6.</span> <span class="nav-text">6. 使用 cache-loader</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-terser-%E5%90%AF%E5%8A%A8%E5%A4%9A%E7%BA%BF%E7%A8%8B"><span class="nav-number">1.10.7.</span> <span class="nav-text">7. terser 启动多线程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-%E5%90%88%E7%90%86%E4%BD%BF%E7%94%A8-sourceMap"><span class="nav-number">1.10.8.</span> <span class="nav-text">8. 合理使用 sourceMap</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">1.10.9.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Webpack-%E4%B8%8E-grunt%E3%80%81gulp-%E6%9C%89%E4%BB%80%E4%B9%88%E4%B8%8D%E5%90%8C"><span class="nav-number">1.11.</span> <span class="nav-text">Webpack 与 grunt、gulp 有什么不同</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E4%B8%8A%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">1.11.1.</span> <span class="nav-text">使用上的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-1"><span class="nav-number">1.11.2.</span> <span class="nav-text">总结</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Steven128"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Steven128</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">1</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Steven128" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Steven128" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>




<script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
<script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
<div class="widget-wrap">
    <h5 class="widget-title" style="border-top: 1px solid #ddd; text-align: left; padding-top: 16px">标签</h5>
    <div id="myCanvasContainer" class="widget tagcloud">
        <canvas width="250" height="250" id="resCanvas" style="width:100%">
            <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/" rel="tag">webpack</a><span class="tag-list-count">1</span></li></ul>
        </canvas>
    </div>
</div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class=""></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Github@Steven128</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  




  
<script src="/js/local-search.js"></script>













    <div id="pjax">
  

  

    </div>
</body>
</html>
